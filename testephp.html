<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Meta%</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="css/style.css" />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
      .drop-zone {
        border: 2px dotted #ccc;
        padding: 40px;
        text-align: center;
        cursor: pointer;
        margin-bottom: 20px;
        width: 80%;
        height: 150px;
        margin: 0 auto;
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .hidden {
        display: none;
      }
      .file-preview {
        display: flex;
        flex-direction: column;
        gap: 5px;
        margin-top: 10px;
      }
      .file-preview-item {
        display: flex;
        align-items: center;
        gap: 10px;
      }
      .file-preview img {
        max-width: 80px;
        max-height: 80px;
        display: block;
        margin-right: 10px;
      }
      .remove-file {
        cursor: pointer;
        color: red;
        font-size: 18px;
        margin-left: 10px;
      }
      .progress {
        height: 20px;
      }
      .description-area {
        border: 2px solid #ccc;
        padding: 10px;
        height: 100px;
        width: 100%;
        resize: vertical;
      }
      .form-check-label {
        margin-left: 10px;
      }
      .mb-4 {
        margin-bottom: 1.5rem;
      }
    </style>
  </head>
  <body>
    <header>
      <nav class="navbar sticky-top navbar-expand-lg bg-body-tertiary">
        <div class="container-fluid">
          <a class="navbar-brand" href="index.html">Meta%</a>
          <button
            class="navbar-toggler"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#navbarNav"
            aria-controls="navbarNav"
            aria-expanded="false"
            aria-label="Toggle navigation"
          >
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav">
              <li class="nav-item">
                <a class="nav-link" href="index.html">Início</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#">Sobre</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#">Quem Somos</a>
              </li>
            </ul>
          </div>
        </div>
      </nav>
    </header>

    <div style="margin-bottom: 40px;" class="container mt-5">
      <div class="card p-4">
        <h3 class="text-center">Criar Meta</h3>

        <form id="meta-form">
          <div class="mb-3">
            <label for="inputtitle" class="form-label">Título</label>
            <input
              type="text"
              class="form-control"
              id="inputtitle"
              placeholder="Título"
            />
          </div>
          <div class="mb-3">
            <label for="inputDescription" class="form-label">Descrição</label>
            <textarea
              class="form-control description-area"
              id="inputDescription"
              placeholder="Digite a descrição aqui..."
            ></textarea>
          </div>
          <div id="requirements-list" class="mb-3">
            <label class="form-label">Requisitos</label>
            <div class="d-flex gap-2 align-items-center">
              <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" />
              </div>
              <input type="text" class="form-control" placeholder="Descrição" />
              <input type="date" class="form-control" />
              <button
                type="button"
                class="btn btn-success btn-sm add-requirement"
              >
                +
              </button>
            </div>
          </div>
          <div class="progress mb-3">
            <div
              id="progress-bar"
              class="progress-bar bg-success"
              style="width: 0%"
            >
              0%
            </div>
          </div>
          <div class="drop-zone" id="drop-zone">
            <span>Arraste arquivos ou fotos aqui</span>
          </div>
          <input type="file" id="fileInput" class="hidden" multiple />
          <div id="file-preview" class="file-preview"></div>

          <button
            type="submit"
            class="btn btn-primary w-100"
            style="margin-top: 20px"
          >
            Criar Meta
          </button>
        </form>
      </div>
    </div>

    <footer data-aos="fade-up" data-aos-anchor-placement="top-bottom">
      <div class="container">
        <div class="row">
          <div class="col-lg-3 col-12 metapercent">
            <a href="#" class="footer-metapercent">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="16"
                height="16"
                fill="currentColor"
                class="bi bi-send-x-fill"
                viewBox="0 0 16 16"
              >
                <path
                  d="M15.964.686a.5.5 0 0 0-.65-.65L.767 5.855H.766l-.452.18a.5.5 0 0 0-.082.887l.41.26.001.002 4.995 3.178 1.59 2.498C8 14 8 13 8 12.5a4.5 4.5 0 0 1 5.026-4.47zm-1.833 1.89L6.637 10.07l-.215-.338a.5.5 0 0 0-.154-.154l-.338-.215 7.494-7.494 1.178-.471z"
                />
                <path
                  d="M16 12.5a3.5 3.5 0 1 1-7 0 3.5 3.5 0 0 1 7 0m-4.854-1.354a.5.5 0 0 0 0 .708l.647.646-.647.646a.5.5 0 0 0 .708.708l.646-.647.646.647a.5.5 0 0 0 .708-.708l-.647-.646.647-.646a.5.5 0 0 0-.708-.708l-.646.647-.646-.647a.5.5 0 0 0-.708 0"
                />
              </svg>
              MetaPercent
            </a>
            <p>
              Criado pela <a href="#">Equipe MetaPercent</a>, este site é
              perfeito para pessoas que busquem se desafiarem.
            </p>
            <p>Versão: v1.0</p>
            <ul class="footer-list-links">
              <li class="footer-li-links cadastro">
                <a href="#" class="btn btn-outline-light button-footer"
                  >Cadastrar-se</a
                >
              </li>
            </ul>
          </div>
          <div class="col-lg-2 col-md-6 col-6">
            <h5 class="footer-title">Redes sociais</h5>
            <ul class="footer-list-links">
              <li class="footer-li-links">
                <a href="#">
                  <i class="bi bi-facebook"></i>
                  Facebook</a
                >
              </li>
              <li class="footer-li-links">
                <a href="#">
                  <i class="bi bi-twitter-x"></i>
                  Twitter</a
                >
              </li>
              <li class="footer-li-links">
                <a href="#">
                  <i class="bi bi-instagram"></i>
                  Instagram</a
                >
              </li>
              <li class="footer-li-links">
                <a href="#">
                  <i class="bi bi-github"></i>
                  Github</a
                >
              </li>
            </ul>
          </div>
          <div class="col-lg-2 col-md-6 col-6">
            <h5 class="footer-title">ligações</h5>
            <ul class="footer-list-links">
              <li class="footer-li-links"><a href="#">Home</a></li>
              <li class="footer-li-links"><a href="#">Criar metas</a></li>
              <li class="footer-li-links"><a href="#">Metas</a></li>
              <li class="footer-li-links"><a href="#">Perfil</a></li>
            </ul>
          </div>
          <div class="col-lg-2 col-md-6 col-6">
            <h5 class="footer-title">Equipe</h5>
            <ul class="footer-list-links">
              <li class="footer-li-links"><a href="#">Membros</a></li>
              <li class="footer-li-links"><a href="#">Sobre</a></li>
            </ul>
          </div>
          <div class="col-lg-2 col-md-6 col-6">
            <h5 class="footer-title">Contato</h5>
            <p>Email: metaper@gmail.com</p>
            <p>Telefone: (12) 99999-9999</p>
          </div>
        </div>
      </div>
      <div class="direitos">
        <p>@MetaPercent | Todos os direitos reservados</p>
      </div>
    </footer>

    <script>
      $(document).ready(function () {
        function updateProgress() {
          let checked = $(".form-check-input:checked").length;
          let total = $(".form-check-input").length;
          let progress = total > 0 ? Math.round((checked / total) * 100) : 0;
          $("#progress-bar")
            .css("width", progress + "%")
            .text(progress + "%");
        }

        $(document).on("change", ".form-check-input", updateProgress);

        $(".add-requirement").click(function () {
          $("#requirements-list").append(
            '<div class="d-flex gap-2 align-items-center mt-2">' +
              '<div class="form-check">' +
              '<input class="form-check-input" type="checkbox" value="">' +
              "</div>" +
              '<input type="text" class="form-control" placeholder="Descrição">' +
              '<input type="date" class="form-control">' +
              '<button type="button" class="btn btn-danger btn-sm remove-requirement">-</button>' +
              "</div>"
          );
          updateProgress();
        });

        $(document).on("click", ".remove-requirement", function () {
          $(this).parent().remove();
          updateProgress();
        });

        // Corrigir arraste de arquivos
        $("#drop-zone").on("dragover", function (e) {
          e.preventDefault();
        });

        $("#drop-zone").on("drop", function (e) {
          e.preventDefault();
          let files = e.originalEvent.dataTransfer.files;
          let preview = $("#file-preview");
          preview.empty();
          for (let i = 0; i < files.length; i++) {
            let file = files[i];
            let fileItem = $("<div>").addClass("file-preview-item");
            let fileName = $("<span>").text(file.name);
            let removeBtn = $("<span>").addClass("remove-file").text("X");

            removeBtn.click(function () {
              fileItem.remove();
            });

            if (file.type.startsWith("image/")) {
              let reader = new FileReader();
              reader.onload = function (e) {
                let img = $("<img>").attr("src", e.target.result);
                fileItem.append(img);
                fileItem.append(fileName);
                fileItem.append(removeBtn);
                preview.append(fileItem);
              };
              reader.readAsDataURL(file);
            } else {
              fileItem.append(fileName);
              fileItem.append(removeBtn);
              preview.append(fileItem);
            }
          }
        });

        // Mostrar o campo de arquivo ao clicar no drop-zone
        $("#drop-zone").click(function () {
          $("#fileInput").click();
        });

        $("#fileInput").change(function () {
          let files = this.files;
          let preview = $("#file-preview");
          preview.empty();
          for (let i = 0; i < files.length; i++) {
            let file = files[i];
            let fileItem = $("<div>").addClass("file-preview-item");
            let fileName = $("<span>").text(file.name);
            let removeBtn = $("<span>").addClass("remove-file").text("X");

            removeBtn.click(function () {
              fileItem.remove();
            });

            if (file.type.startsWith("image/")) {
              let reader = new FileReader();
              reader.onload = function (e) {
                let img = $("<img>").attr("src", e.target.result);
                fileItem.append(img);
                fileItem.append(fileName);
                fileItem.append(removeBtn);
                preview.append(fileItem);
              };
              reader.readAsDataURL(file);
            } else {
              fileItem.append(fileName);
              fileItem.append(removeBtn);
              preview.append(fileItem);
            }
          }
        });
      });
    </script>
  </body>
</html>
